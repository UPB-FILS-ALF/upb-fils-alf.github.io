"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[181],{1196:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>d,toc:()=>o});var i=s(4848),l=s(8453);const r={sidebar_position:9,description:"Utiliser le tableau de symboles",slug:"/tp/08"},t="08 - G\xe9n\xe9ration de code",d={id:"tp/08/index",title:"08 - G\xe9n\xe9ration de code",description:"Utiliser le tableau de symboles",source:"@site/versioned_docs/version-2024/tp/08/index.md",sourceDirName:"tp/08",slug:"/tp/08",permalink:"/docs/2024/tp/08",draft:!1,unlisted:!1,editUrl:"https://github.com/UPB-FILS-alf/upb-fils-alf.github.io/edit/main/versioned_docs/version-2024/tp/08/index.md",tags:[],version:"2024",sidebarPosition:9,frontMatter:{sidebar_position:9,description:"Utiliser le tableau de symboles",slug:"/tp/08"},sidebar:"tutorialSidebar",previous:{title:"07 - Analyse s\xe9mantique",permalink:"/docs/2024/tp/07"},next:{title:"09 -  WebAssembly",permalink:"/docs/2024/tp/09"}},c={},o=[{value:"Instructions",id:"instructions",level:2},{value:"Instructions avec la pile",id:"instructions-avec-la-pile",level:3},{value:"Instructions math\xe9matiques",id:"instructions-math\xe9matiques",level:3},{value:"Instructions logiques",id:"instructions-logiques",level:3},{value:"Contr\xf4le du flux",id:"contr\xf4le-du-flux",level:3},{value:"Appel de fonctions",id:"appel-de-fonctions",level:3},{value:"Exemples",id:"exemples",level:2},{value:"Exercices",id:"exercices",level:2}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"08---g\xe9n\xe9ration-de-code",children:"08 - G\xe9n\xe9ration de code"}),"\n",(0,i.jsx)(n.p,{children:"La g\xe9n\xe9ration de code est l\u2019une des derni\xe8res \xe9tapes dans le processus de compilation. En fonction du langage cible, on peut avoir soit une g\xe9n\xe9ration interm\xe9diaire de code (dans le cas de Three Address Code) ou une g\xe9n\xe9ration de code dans un langage d\u2019assemblage."}),"\n",(0,i.jsx)(n.p,{children:"Dans ce TP, on travaillera sur avec un interm\xe9diaire pour une machine \xe0 pile infinie. Donc, le principe de fonctionnement sera le suivant: on a une pile sur laquelle on met les op\xe9randes (soient-ils des valeurs ou des variables) et, ensuite, on utilise les instructions sur le contenu de la pile."}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"Rappelez-vous comment on a proc\xe9d\xe9 pour le premier devoir. Le principe est le m\xeame."})}),"\n",(0,i.jsx)(n.h2,{id:"instructions",children:"Instructions"}),"\n",(0,i.jsx)(n.h3,{id:"instructions-avec-la-pile",children:"Instructions avec la pile"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Instruction"}),(0,i.jsx)(n.th,{children:"Op\xe9randes"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"push"})}),(0,i.jsx)(n.td,{children:"val/var"}),(0,i.jsxs)(n.td,{children:["Ajoute la valeur ",(0,i.jsx)(n.code,{children:"val"})," ou la variable ",(0,i.jsx)(n.code,{children:"var"})," sur la pile"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"pop"})}),(0,i.jsx)(n.td,{children:"var"}),(0,i.jsxs)(n.td,{children:["Supprime et sauvegarde la valeur au sommet de la pile dans la variable ",(0,i.jsx)(n.code,{children:"var"})]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"instructions-math\xe9matiques",children:"Instructions math\xe9matiques"}),"\n",(0,i.jsx)(n.p,{children:"Pour tout op\xe9ration math\xe9matique, le r\xe9sultat se trouvera toujours au sommet de la pile."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Instruction"}),(0,i.jsx)(n.th,{children:"Op\xe9randes"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"add"})}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Prend les premi\xe8res deux valeurs de la pile et fait leur somme"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"sub"})}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Prend les premi\xe8res deux valeurs de la pile et fait leur diff\xe9rence"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"mul"})}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Prend les premi\xe8res deux valeurs de la pile et fait leur produit"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"div"})}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Prend les premi\xe8res deux valeurs de la pile et fait leur division"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"instructions-logiques",children:"Instructions logiques"}),"\n",(0,i.jsxs)(n.p,{children:["Pour tout op\xe9ration logique, le r\xe9sultat se trouvera toujours au sommet de la pile: 1 pour ",(0,i.jsx)(n.code,{children:"VRAI"}),", 0 pour ",(0,i.jsx)(n.code,{children:"FAUX"}),". Toutes les instructions prennent les deux premi\xe8res valeurs de la pile et font la comparaison associ\xe9e."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Instruction"}),(0,i.jsx)(n.th,{children:"Op\xe9randes"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,i.jsx)(n.code,{children:"gt"}),", ",(0,i.jsx)(n.code,{children:"ge"})]}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Prend les premi\xe8res deux valeurs de la pile et les compare en utilisant plus grand que/plus grand que ou \xe9gal"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,i.jsx)(n.code,{children:"lt"}),", ",(0,i.jsx)(n.code,{children:"le"})]}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Prend les premi\xe8res deux valeurs de la pile et les compare en utilisant moins que/Moins que ou \xe9gal"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:[(0,i.jsx)(n.code,{children:"eq"}),", ",(0,i.jsx)(n.code,{children:"ne"})]}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Prend les premi\xe8res deux valeurs de la pile et les compare en utilisant \xe9gal/diff\xe9rent"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"contr\xf4le-du-flux",children:"Contr\xf4le du flux"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Instruction"}),(0,i.jsx)(n.th,{children:"Op\xe9randes"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"if goto"})}),(0,i.jsx)(n.td,{children:"label"}),(0,i.jsxs)(n.td,{children:["Prend le sommet de la pile. Si la valeur est vraie (pas ",(0,i.jsx)(n.code,{children:"0"}),"), on fait le saut vers l\u2019\xe9tiquette ",(0,i.jsx)(n.code,{children:"label"}),". Autrement, on continue l\u2019ex\xe9cution."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"ifFalse goto"})}),(0,i.jsx)(n.td,{children:"label"}),(0,i.jsxs)(n.td,{children:["Prend le sommet de la pile. Si la valeur est fausse (",(0,i.jsx)(n.code,{children:"0"}),"), on fait le saut vers l\u2019\xe9tiquette ",(0,i.jsx)(n.code,{children:"label"}),". Autrement, on continue l\u2019ex\xe9cution."]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"appel-de-fonctions",children:"Appel de fonctions"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Instruction"}),(0,i.jsx)(n.th,{children:"Op\xe9randes"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"call"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"fonction"}),", ",(0,i.jsx)(n.code,{children:"nr_params"})]}),(0,i.jsxs)(n.td,{children:["Appele la fonction ",(0,i.jsx)(n.code,{children:"fonction"})," avec ",(0,i.jsx)(n.code,{children:"nr_params"})," param\xe8tres"]})]})})]}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsx)(n.p,{children:"Pour les param\xe8tres, il faut les ajouter \xe0 la pile dans l\u2019ordre inv\xe8rse de leur positions dans l\u2019ent\xeate de la fonction. Par exemple, pour l'appel suivant:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"call sum(2, 4, x);\n"})}),(0,i.jsx)(n.p,{children:"On obtiendra le code:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"push x\npush 4\npush 2\ncall sum, 3\n"})})]}),"\n",(0,i.jsx)(n.h2,{id:"exemples",children:"Exemples"}),"\n",(0,i.jsx)(n.p,{children:"Prenons l\u2019exemple suivant d\u2019expr\xe9ssion et le code g\xe9n\xe9r\xe9 pour elle:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"/* Expression */\nx = (5-3)/7;\n\n/* Code */\npush 5\npush 3\nsub\npush 7\ndiv\npop x\n"})}),"\n",(0,i.jsx)(n.h2,{id:"exercices",children:"Exercices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Ouvrez le dossier ",(0,i.jsx)(n.code,{children:"TP8"}),". Dans le fichier ",(0,i.jsx)(n.code,{children:"Ex1.txt"}),", \xe9crivez le code cible pour les expressions suivantes:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"a = (5-3)*7+2+4;\ne = (a+5)/(a-2);\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Ouvrez le dossier ",(0,i.jsx)(n.code,{children:"TP8"}),". Dans le fichier ",(0,i.jsx)(n.code,{children:"Ex2.txt"}),", \xe9crivez le code cible pour le code source suivant:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'if (a > 0)\n{\n  result = "positive";\n}\nelse\n{\n  result = "negative";\n}\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["Ouvrez le dossier ",(0,i.jsx)(n.code,{children:"TP8/Code"}),". Suivez les ",(0,i.jsx)(n.code,{children:"TODO3"})," dans le fichier ",(0,i.jsx)(n.code,{children:"app/src/main/kotlin/CodeGenerator"})," pour implanter la g\xe9n\xe9ration de code pour les expressions. Les \xe9tapes sont les suivantes:"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["commencez avec les valeurs (donc, avec les instances de la classe ",(0,i.jsx)(n.code,{children:"Value"}),"). Les instructions r\xe9sultantes doivent tout simplement ajouter la valeur sur la pile"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"continuez avec les expressions binaires, pour lesquelles il faut ajouter les deux op\xe9randes et faire l\u2019op\xe9ration corr\xe9spondante \xe0 partir de l\u2019op\xe9rateur"}),"\n",(0,i.jsxs)(n.p,{children:["V\xe9rifiez votre code en utilisant des entr\xe9es situ\xe9es dans le dossier ",(0,i.jsx)(n.code,{children:"Ex8/Inputs/Ex3"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Ouvrez le dossier ",(0,i.jsx)(n.code,{children:"TP8/Code"}),". Suivez les ",(0,i.jsx)(n.code,{children:"TODO4"})," dans le fichier ",(0,i.jsx)(n.code,{children:"app/src/main/kotlin/CodeGenerator"})," pour implanter la g\xe9n\xe9ration de code pour les aff\xe9ctations.\nV\xe9rifiez votre code en utilisant des entr\xe9es situ\xe9es dans le dossier ",(0,i.jsx)(n.code,{children:"Ex8/Inputs/Ex4"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Ouvrez le dossier ",(0,i.jsx)(n.code,{children:"TP8/Code"}),". Suivez les ",(0,i.jsx)(n.code,{children:"TODO5"})," dans le fichier ",(0,i.jsx)(n.code,{children:"app/src/main/kotlin/CodeGenerator"})," pour implanter la g\xe9n\xe9ration de code pour les instructions ",(0,i.jsx)(n.code,{children:"if"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"Faites attention: sachant que ce genre d\u2019instruction n\xe9c\xe9ssite des \xe9tiquettes et que les \xe9tiquettes doivent \xeatre unique dans le code, il faut aussi ajouter une variable qui les compte et qui est increment\xe9e chaque fois qu\u2019on ajoute une nouvelle \xe9tiquette."})}),"\n",(0,i.jsxs)(n.p,{children:["V\xe9rifiez votre code en utilisant des entr\xe9es situ\xe9es dans le dossier ",(0,i.jsx)(n.code,{children:"Ex8/Inputs/Ex5"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Ouvrez le dossier ",(0,i.jsx)(n.code,{children:"TP8/Code"}),". Suivez les ",(0,i.jsx)(n.code,{children:"TODO6"})," dans le fichier ",(0,i.jsx)(n.code,{children:"app/src/main/kotlin/CodeGenerator"})," pour implanter la g\xe9n\xe9ration de code pour les appels des fonctions."]}),"\n",(0,i.jsxs)(n.p,{children:["V\xe9rifiez votre code en utilisant des entr\xe9es situ\xe9es dans le dossier ",(0,i.jsx)(n.code,{children:"Ex8/Inputs/Ex6"}),"."]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var i=s(6540);const l={},r=i.createContext(l);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);